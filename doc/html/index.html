<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.01 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/shtml1-strict.dtd">


<html xmlns=http://www.w3.org/1999/xhtl" lang="en" xml:lang="en">
  <head>

    <meta http-equiv="Content-Type" content="text/html"; charset=UTF-8" />
    
    <title>USRP Modifications Docs</title>

    <link type="text/css" rel="stylesheet" href="style.css"/>

  </head>

  <body>
    <h1>Universal Software Radio Peripheral (USRP) </h1>
    <h2>Overview</h2>
    The USRP board described in this document covers the 1st generation boards, which use a USB 2.0 interface to transfer data from the USRP to a computer for processing. This document describes modifications necessary to alter the standard USRP into a pulse-enabled system; allowing the system to function with a pulsed radar. The following sections will provide detailed explanation of changes made and will also list the open-source tools required to make these changes. It is far beyond the scope of this document to provide tutorials describing use of the various tools, I will leave that up to the reader, if they feel so inclined.
<!--     <ol> -->
<!--       <li> 16 TTL outputs capable of driving 50-Ohm loads. </li> -->
<!--       <li> 12-bit DAC which generates In phase and Quadrature components. </li> -->
<!--       <li> 3 TTL inputs used to synchronize the system with external hardware.</li> -->
<!--       <li> 2 external clock inputs. </li> -->
<!--       <li> Dedicated computer providing an external interface to the system via ethernet. </li> -->
<!--       <li> ATX supply for reliable operation. </li> -->
<!--       <li> TTL output resolution of 20-ns </li>  -->
<!--     </ol> -->

    <h2> System Components </h2>
   
    The Bit Pattern Generator is constructed from a number of components, both custom and commercial, and this section will cover each section of the system and provide a list of links links with more detailed information for each component. A concise summary of the BPG system can be divided into a set of subcomponents as follows:
    <ul>
      <li> Communication interface  (ethernet via mini-ITX computer mainboard).</li>
      <li> Power module (ATX power supply) </li>
      <li> System configuration, operation (mini-ITX computer mainboard). </li>
      <li> Signal/Pattern generation (Opal Kelly FPGA module / FPGA Carrier) </li>
      <li> Signal buffering/line-driving (50-ohm line driver board) </li>
    </ul>

    <h3> Communication Interface </h3>
    Communication with the BPG system is provide through a 10/100 Mbit ethernet interface. This is supplied by the system mainboard, which is a VIA C3 mini-ITX system containing the following components:
    <ul>
      <li> 600MHz VIA C3 processor </li>
      <li> 10/100 Mbit ethernet controller </li>
      <li> 256MB RAM </li>
      <li> 250GB Seagate IDE HD </li>
      <li> Gentoo Linux distribution with multiple communication interfaces (ssh, rsync, ftp, VNC, etc...)
    </ul>

    Gentoo Linux was the chosen distribution due to the ability to customize/minimize packages required for functionality. This particular Operating System is also considered the best documented OS in existence. Gentoo was installed using a second computer and attaching an external IDE drive. This external drive was formatted with the following partition table:
    <ul>
      <li> /dev/hda1   /boot     ext2   128MB </li>
      <li> /dev/hda2   swap      swap   2GB   </li>
      <li> /dev/hda3   /         xfs    remaining space </li>
    </ul>

    To simplify installation after a disk failure, backup images were made of both partitions; allowing the user to simply format a new hard drive using the layout above followed by restoring the backups (ext2 uses dump/restore - xfs uses xfsdump/xfsrestore).

<h3> Power Module </h3>
    The system is powered using a standard ATX power supply, in this case a 500W supply providing a -5V signal. Any decent power supply could be substituded, providing that it supplies a -5V power signal (the standard specifies -5V but many do not provide it since it is not used at this time).

<h3> Configuration / Operation software </h3>
    All supplied software is written in C++ and contains few dependencies other than wide use of the BOOST libraries (www.boost.org). The system contains a number of programs to configure and run the system. Each of these programs have a standard naming convention:
    <ul>
      <li> bpg-generate      : takes the ASCII input file (.bpg) and translates into a format suitable for the FPGA module. </li>
      <li> bpg-documentation : a link to this web based document. </li>
      <li> bpg-shell         : shell used to operate the system </li>
      <li> bpg-network       : remote-shell for network based operation </li>
    </ul>

<h3> Signal / Pattern Generation </h3>
    To provide real-time signal generation, an Opal Kelly XEM3001v2 FPGA module is used. This module provides a Xilinx Spartan-3 400,000 gate FPGA with 288Kb of block memory. The device is programmed using a USB2.0 interface, which provides data transfer rates up to 32 MBPS. Opal Kelly provides a large number of libraries to program the device and create custom configurations for a variety of languages. These libraries are contained on the previously mentioned VIA C3 mainboard and are used by the BPG software described above. 

<h3> Signal Buffering - 50 Ohm Line Driver board </h3>
    A custom built line driver board was developed to drive a 50 Ohm terminated transmission line. Each board contains 8 outputs which are driven by the SN47ABT541 series of TTL ICs. The board was designed using gEDA software (www.seol.org) tools on a Linux system. These tools are widely available and can be installed (with a given amount of difficulty) on a Windows based machine if needed. Gerber files were produced using the industry standard 274x format and the boards were manufactured by Sierra Proto Express (www.protoexpress.com). These boards contain 2 layers with dimensions of 1.5" x 6.25". The following links provide all needed information to reproduce or alter the design; including schematics, pcb layout, gerber files, parts procurement.

<h3> FPGA Carrier Board </h3>

    <!--
    <h3> Via C3 mini-itx form factor pc board </h3>
    <h3> ATX power supply </h3>
    <h3> Opal Kelly XEM3001v2 FPGA module </h3>
    <h3> 50-ohm driver board </h3>
    <h3> FPGA carrier board </h3>
    -->

 <address><a href="mailto:rseal@naic.edu"></a></address>
      <!-- Created: Thu Feb 22 22:35:00 AST 2007 -->
      <!-- hhmts start -->
Last modified: Sun Jan 11 13:06:00 EST 2009
<!-- hhmts end -->
  </body>
</html>
